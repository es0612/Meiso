# 実装計画

- [x] 1. プロジェクト基盤とコア設定の構築
  - Next.js 15プロジェクトの初期化とTypeScript設定
  - Tailwind CSS v4とFramer Motionの設定
  - ESLint、Prettier、Huskyの開発環境構築
  - 基本的なフォルダ構造とファイル命名規則の確立
  - _要件: 4.1, 4.5_

- [x] 2. データモデルとTypeScript型定義の実装
  - MeditationScript、MeditationSession、UserProfileの型定義作成
  - 瞑想スクリプトのJSONデータ構造設計と初期データ作成
  - ローカルストレージ用のユーティリティ関数実装
  - データ検証用のZodスキーマ定義
  - _要件: 2.1, 2.3, 5.3_

- [x] 3. Supabaseデータベースとクライアント設定
  - Supabaseプロジェクト作成とデータベーススキーマ実装
  - Row Level Security (RLS) ポリシーの設定
  - Supabaseクライアントの設定とNext.js統合
  - 認証フローの基本実装（匿名ユーザー対応）
  - _要件: 3.1, 5.1, 5.2, 5.4_

- [x] 4. 基本レイアウトとナビゲーションの実装
  - AppLayoutコンポーネントの作成（ヘッダー、フッター）
  - レスポンシブナビゲーションの実装
  - 30代ビジネスマン向けの洗練されたデザインシステム構築
  - ダークモード/ライトモード切り替え機能
  - _要件: 4.1, 4.3, 4.5_

- [x] 5. 瞑想スクリプト選択機能の実装
  - ScriptSelectorコンポーネントの作成
  - カード形式のスクリプト表示UI実装
  - カテゴリフィルタリング機能の実装
  - スクリプトプレビュー機能の実装
  - デフォルトスクリプト選択ロジックの実装
  - _要件: 2.1, 2.2, 2.3, 2.4_

- [x] 6. Web Audio APIと音声制御システムの実装
  - AudioControllerコンポーネントの作成
  - Web Audio API統合とブラウザ互換性対応
  - 音声ファイル読み込みとエラーハンドリング
  - 音量調整とミュート機能の実装
  - フェードイン/フェードアウト効果の実装
  - _要件: 6.1, 6.2, 6.3, 6.4_

- [x] 7. 瞑想タイマーコンポーネントの実装
  - MeditationTimerコンポーネントの基本構造作成
  - 1分間のカウントダウンタイマー実装
  - 円形プログレスバー（SVG + CSS animations）の実装
  - 一時停止/再開機能の実装
  - キーボードショートカット対応（スペースキーで一時停止など）
  - _要件: 1.1, 1.4_

- [x] 8. 瞑想セッション制御とガイダンス機能
  - 瞑想セッション開始/終了ロジックの実装
  - 音声ガイダンスとタイマーの同期処理
  - セッション完了時の終了音実装
  - バックグラウンド実行対応（Page Visibility API使用）
  - 没入型瞑想レイアウト（MeditationLayout）の実装
  - _要件: 1.1, 1.2, 1.3, 4.2_

- [x] 9. セッション履歴管理システムの実装
  - MeditationHistoryコンポーネントの作成
  - セッション記録の保存機能（ローカル/クラウド）
  - 履歴一覧表示とフィルタリング機能
  - 連続瞑想日数（ストリーク）計算ロジック
  - 統計表示機能（総セッション数、総時間）
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 10. ユーザー認証とプロフィール管理
  - Supabase認証の統合（メール/パスワード）
  - ユーザープロフィール作成と更新機能
  - 匿名ユーザーからアカウント作成への移行機能
  - ローカル履歴のクラウド同期機能
  - ユーザー設定（音声、テーマ等）の永続化
  - _要件: 5.1, 5.2, 5.4, 6.3_

- [x] 11. 設定とユーザー体験の最適化
  - 音声オン/オフ切り替え設定画面の実装
  - ユーザー設定の永続化とセッション間での保持
  - 視覚的ガイダンス（音声オフ時）の実装
  - アクセシビリティ対応（ARIA属性、キーボードナビゲーション）
  - エラーハンドリングとユーザーフレンドリーなエラーメッセージ
  - _要件: 6.1, 6.2, 6.4, 4.4_

- [x] 12. パフォーマンス最適化とPWA機能
  - コード分割と遅延読み込みの実装
  - 画像とアセットの最適化
  - Service Workerによるオフライン対応
  - キャッシュ戦略の実装
  - Core Web Vitals最適化
  - _要件: 4.3, 4.4_

- [ ] 13. テスト実装とE2E検証
  - 主要コンポーネントのユニットテスト作成
  - 瞑想セッションフローのE2Eテスト実装
  - 認証フローのテスト実装
  - アクセシビリティテストの実装
  - クロスブラウザテストの設定
  - _要件: 全要件の検証_

- [ ] 14. デプロイとモニタリング設定
  - Vercel本番環境へのデプロイ設定
  - Supabase本番データベースの設定
  - CI/CDパイプライン（GitHub Actions）の構築
  - エラー監視（Sentry）とアナリティクス設定
  - パフォーマンス監視とアラート設定
  - _要件: 全要件の本番環境での動作確認_